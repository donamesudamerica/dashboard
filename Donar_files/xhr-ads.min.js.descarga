!function(){"use strict";function a(a){if(!a)return!1;if(!a.match("https?://"))return!0;var b=/:\/\/(.[^:\/]+)/.exec(a);return!(!b||!/\.paypal\.com$/.exec(b[1]))}var b=window.XMLHttpRequest,c=window.ActiveXObject,d=function(d){function e(){}function f(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function g(a){return function(){return this[a].apply(this,arguments)}}function h(a){if("undefined"!=typeof PAYPAL&&"undefined"!=typeof PAYPAL.analytics&&"undefined"!=typeof PAYPAL.analytics.instance&&"undefined"!=typeof fpti){var b="main:authchallenge::submit:"+window.location.pathname.replace(/\//g,":");if(fpti.pgrp=b,fpti.page=b,a.adsCaptcha&&(fpti.adsCaptcha=a.adsCaptcha),a.link)return fpti.link=a.link,void PAYPAL.analytics.instance.recordClick();PAYPAL.analytics.instance.recordImpression()}}function i(a){return window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject(a)}function j(a){var b,c,d="";if("object"==typeof a&&"FORM"===a.nodeName){var e=a.elements.length;for(c=0;c<e;c++)b=a.elements[c],b.name&&!b.disabled&&"file"!==b.type&&"reset"!==b.type&&"submit"!==b.type&&"button"!==b.type&&"select-multiple"!==b.type&&("checkbox"!==b.type&&"radio"!==b.type||b.checked)&&(d&&(d+="&"),d+=b.name+"="+encodeURIComponent(b.value))}return d}function k(a){try{var b="utf-8",c="text/html",d=n.getResponseHeader("Content-Type"),e=new FileReader;if(d){c=d.split(";")[0].trim();var f=/charset\s*=\s*\"?([^\s\"]*)\"?\s*$/i,g=f.exec(d);g&&(b=g[1].toLowerCase())}if("arraybuffer"===n.responseType){var h=new Blob([n.response],{type:c.toLowerCase()});e.onloadend=function(){a(null,e.result)},e.onerror=function(){a("Error while reading the response",null)},e.onabort=function(){a("Abort while reading the response",null)},e.readAsText(h,b)}else"json"===n.responseType?a(null,JSON.stringify(n.response)):"document"===n.responseType?a(null,(new XMLSerializer).serializeToString(n.response)):"blob"===n.responseType?(e.onloadend=function(){a(null,e.result)},e.onerror=function(){a("Error while reading the response",null)},e.onabort=function(){a("Abort while reading the response",null)},e.readAsText(n.response,b)):a(null,n.response)}catch(i){return a(i)}}function l(a){k(function(b,c){if(b)return console.log(b),a();if(!c.match(/id=[\\]?"captcha-standalone[\\]?"/)&&!c.match(/id=[\\]?"response500[\\]?"/))return a();var d,e,f,g=n.getResponseHeader("Content-Type");if(c.match(/id=[\\]?"response500[\\]?"/))f=c.match(/<div id="main"(.+)<\/div>/),f&&(e=f[0]);else if(g.indexOf("application/json")!==-1)try{d=JSON.parse(c).htmlResponse}catch(i){return o.onerror&&o.onerror()}else f=c.match(/<div id="ads-plugin">(.+)<div id="ads-plugin-end"><\/div>/),f&&(d=f[0]);if(!d&&!e)return a();var j=document.querySelector(".ngrl-anomalydetection-div");j&&document.body.removeChild(j);var k=document.createElement("div");if(k.id="captchaComponent",k.className="ngrl-anomalydetection-div",k.style.display="none",e)return k.innerHTML=e,document.body.appendChild(k),u.renderError();k.innerHTML=d,document.body.appendChild(k);var l=!1;0!==document.getElementsByName("recaptcha").length&&(l=!0);var p=document.querySelector("#captchaComponent script[data-name=authchallenge]");if(!p||!p.src)return o.onerror&&o.onerror();var r=document.createElement("script");r.type="text/javascript",r.src=p.src,r.onerror=function(){var a=document.createEvent("Event");a.initEvent("challengerendered",!0,!0),document.getElementById("captcha-standalone").dispatchEvent(a)},k.appendChild(r),document.getElementById("captcha-standalone").addEventListener("challengerendered",function(){var b=document.querySelector("#captchaComponent form[name=challenge]");return b?void("undefined"!=typeof autosubmit&&autosubmit===!0?(h({adsCaptcha:"silent"}),m(b,function(){a()})):(l?b.addEventListener("click",function(c){c.preventDefault(),h({adsCaptcha:"recaptcha"}),m(b,function(){h({adsCaptcha:"reCaptchaSolved",link:"Google reCaptcha submit."}),q.trigger("closePopup","closePopup"),a()})}):b.addEventListener("submit",function(c){c.preventDefault(),h({adsCaptcha:"explicit"}),t.verifyForm(c)&&m(b,function(){h({adsCaptcha:"captchaSubmit",link:"Explicit Captcha submit."}),q.trigger("closePopup","closePopup"),a()})}),document.getElementById("captchaComponent").style.display="block",u.render(l))):a()},!1)})}function m(a,b){o.challengeSubmit=i(d),o.challengeSubmit.open("post",a.action,!0),o.challengeSubmit.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overriddenMimeType&&o.challengeSubmit.overrideMimeType(o.overriddenMimeType),o.challengeSubmit.responseType=o.responseType,o.challengeSubmit.onload=function(){n=o.challengeSubmit,b()},o.challengeSubmit.onreadystatechange=function(){4===o.challengeSubmit.readyState&&n.onreadystatechange&&n.onreadystatechange.apply(n,arguments)},o.ontimeout&&(o.challengeSubmit.timeout=15e3,"ontimeout"in o.challengeSubmit&&(o.challengeSubmit.ontimeout=function(){o.ontimeout.apply(o,arguments)})),"onerror"in o.challengeSubmit&&(o.challengeSubmit.onerror=function(){o.onerror&&o.onerror.apply(o,arguments)}),o.challengeSubmit.send(j(a));var c=document.querySelector("#captchaComponent button[name=continue]");c&&(c.disabled=!0)}var n=b?new b:new c(d),o=this;o.overriddenMimeType=null,o.challengeSubmit=null,o.xRequestWithHeaderSet=!1,o.isPayPalRequest=!1,o.overrideMimeType=function(a){o.overriddenMimeType=a,n.overrideMimeType(a)},o.setRequestHeader=function(a){"string"==typeof a&&"x-requested-with"===a.toLowerCase()&&(o.xRequestWithHeaderSet=!0),n.setRequestHeader.apply(n,arguments)},o.open=function(b,c){o.isPayPalRequest=a(c),n.open.apply(n,arguments)},o.send=function(){!o.xRequestWithHeaderSet&&o.isPayPalRequest&&o.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send.apply(n,arguments),o.xRequestWithHeaderSet=!1},o.abort=function(){o.challengeSubmit&&o.challengeSubmit.abort.apply(o.challengeSubmit,arguments),n.abort.apply(n,arguments)},o.onreadystatechange=null,n.onreadystatechange=function(){return o.isPayPalRequest?4!==o.readyState||200!==o.status?o.onreadystatechange&&o.onreadystatechange():void 0:o.onreadystatechange&&o.onreadystatechange()},o.onload=null,n.onload=function(){return o.isPayPalRequest?void l(function(){return o.onreadystatechange&&o.onreadystatechange(),o.onload&&o.onload()}):o.onload&&o.onload()},["readyState","response","responseText","responseURL","responseXML","status","statusText","upload"].forEach(function(a){Object.defineProperty(o,a,{get:function(){return n[a]}})}),["onerror","onprogress","onloadstart","onloadend","ontimeout","responseType","timeout","withCredentials"].forEach(function(a){Object.defineProperty(o,a,{get:function(){return n[a]},set:function(b){n[a]=b}})}),["addEventListener","removeEventListener","dispatchEvent","getResponseHeader","getAllResponseHeaders"].forEach(function(a){Object.defineProperty(o,a,{value:function(){return n[a].apply(n,arguments)}})});var p=e.prototype;p.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},p.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},p.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},p.addListener=function(a,b){var c,d=this.getListenersAsObject(a),e="object"==typeof b;for(c in d)d.hasOwnProperty(c)&&f(d[c],b)===-1&&d[c].push(e?b:{listener:b,once:!1});return this},p.on=g("addListener"),p.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},p.once=g("addOnceListener"),p.defineEvent=function(a){return this.getListeners(a),this},p.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},p.removeListener=function(a,b){var c,d,e=this.getListenersAsObject(a);for(d in e)e.hasOwnProperty(d)&&(c=f(e[d],b),c!==-1&&e[d].splice(c,1));return this},p.off=g("removeListener"),p.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},p.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},p.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},p.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},p.removeAllListeners=g("removeEvent"),p.emitEvent=function(a,b){var c,d,e,f,g,h=this.getListenersAsObject(a);for(f in h)if(h.hasOwnProperty(f))for(c=h[f].slice(0),e=0;e<c.length;e++)d=c[e],d.once===!0&&this.removeListener(a,d.listener),Array.isArray(b)||(b=[b]),g=d.listener.apply(this,b||[]),g===this._getOnceReturnValue()&&this.removeListener(a,d.listener);return this},p.trigger=g("emitEvent"),p.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},p.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},p._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},p._getEvents=function(){return this._events||(this._events={})};var q=new e,r={find:function(a,b){if(Array.isArray(a)||"undefined"!=typeof a.length&&"undefined"!=typeof a.item){for(var c=[],d=0;d<a.length;d+=1)c.push(a[d].getElementsByClassName(b));return c}return a.getElementsByClassName(b)},getParents:function(a,b){for(var c=[],d=a.parentNode;null!==d;){var e=d;e.getAttribute&&e.hasAttribute("class")&&e.getAttribute("class").match(b)&&c.push(e),d=e.parentNode}return c},getSiblings:function(a,b){function c(a){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a.className.match(b)&&c.push(a);return c}if(Array.isArray(a)){var d=[];for(var e in a)d.push(c(e));return d}return c(a)},addClass:function(a,b){if(Array.isArray(a))for(var c=0;c<a.length;c+=1){var d=a[c];d.className&&d.className.match("(\\s|^)"+b+"(\\s|$)")||(d.className=d.className?d.className+" "+b:b)}else a.className=a.className?a.className+" "+b:b},removeClass:function(a,b){if(Array.isArray(a))for(var c=0;c<a.length;c+=1){var d=a[c];d.className&&(d.className=d.className.replace(b,""))}else a.className&&(a.className=a.className.replace(b,""))},hasClass:function(a,b){if(Array.isArray(a)){for(var c=0;c<a.length;c+=1)if(a[c].className.match("(\\s|^)"+b+"(\\s|$)"))return!0;return!1}return a.className.match("(\\s|^)"+b+"(\\s|$)")}},s={init:function(a){if(a){var b=[].slice.call(a.querySelectorAll(".validate, .validateEmpty"));0!==b.length&&b.forEach(function(a){q.on("keyup",function(){s.doValidation(a.target)})})}},doValidation:function(a){if(a){var b=a.type,c=a.name,d=a.getAttribute("disabled"),e=a.value&&a.value.trim(),f=/^\S+$/;if("text"===b)if(s.isEmpty(a)&&!d)q.trigger("empty"+c,c);else if(r.hasClass(a,"validate")&&!d)switch(c){case"captcha":s.isValid(f,e,c)}else q.trigger("valid"+c,c)}},isValid:function(a,b,c){a.test(b)?q.trigger("valid"+c,c):q.trigger("invalid"+c,c)},isEmpty:function(a){return!a.value}},t={showError:function(a){var b,c;b="focusin"===a.type?document.querySelector(a.target):a,c=r.getParents(b,"textInput")[0],r.hasClass(c,"hasError")&&(c.style["z-index"]=100,r.addClass(r.getSiblings(r.getParents(b,"fieldWrapper"),"errorMessage"),"show"),b.setAttribute("aria-describedby",b.nodeName+"ErrorMessage"))},removeError:function(a){var b=r.getParents(a.target,"textInput")[0];r.hasClass(b,"hasError")&&!r.hasClass(b,"fieldinvalid")&&(b.className=b.className.replace("hasError",""),b.style["z-index"]="",r.removeClass(r.getSiblings(r.getParents(a.target,"fieldWrapper"),"errorMessage"),"show"),a.target.setAttribute("aria-describedby",""))},hideErrorMessage:function(a){var b=document.getElementById(a.target.id),c=r.getParents(b,"textInput")[0];c.style["z-index"]="",r.removeClass(r.getSiblings(r.getParents(b,"fieldWrapper"),"errorMessage"),"show")},markError:function(a){var b,c=["empty","invalid","valid"],d=[].slice.call(a.querySelectorAll(".validate, .validateEmpty")),e=[];0!==d.length&&d.forEach(function(a){e.push(a.getAttribute("name")),a.addEventListener("blur",function(a){var b=document.getElementById(a.target.id);r.hasClass(r.getParents(b,"textInput"),"fieldinvalid")&&r.addClass(r.getParents(b,"textInput"),"hasError")})}),c.forEach(function(a){e.forEach(function(c){!function(a,c){q.on(a+c,function(c){b=document.getElementById(c+"div"),"invalid"===a&&(b.className+=" field"+a,b.className=b.className.replace("fieldempty",""),r.addClass(r.find(b.querySelectorAll(".errorMessage"),"emptyError"),"hide")),"empty"===a&&(b.className+=" field"+a,b.className=b.className.replace("fieldinvalid",""),r.addClass(r.find(b.querySelectorAll(".errorMessage"),"invalidError"),"hide")),"empty"!==a&&"invalid"!==a||r.removeClass(r.find(b.querySelectorAll(".errorMessage"),a+"Error"),"hide"),"valid"===a&&(r.removeClass(b,"fieldempty"),r.removeClass(b,"fieldinvalid"),r.removeClass(b,"hasError"),r.removeClass(r.find(b,"errorMessage"),"show"),r.addClass(r.find(b.querySelectorAll(".errorMessage"),"emptyError"),"hide"),r.addClass(r.find(b.querySelectorAll(".errorMessage"),"invalidError"),"hide"))})}(a,c)})})},focusError:function(a){var b,c=a.querySelectorAll(".validate, .validateEmpty"),d=[],e=0;c.forEach(function(a){r.getParents(a,"hasError").length>0&&(d.push(e),e+=1)}),b=c[d[0]],b.is(":focus")?t.showError(b):b.focus()},animateNotification:function(){var a=document.getElementById("notifications");a.slideDown(),setTimeout(function(){a.slideUp(function(){q.trigger("slidUp")})},5e3)},verifyForm:function(a){var b=a.target,c=[].slice.call(b.querySelectorAll(".validate, .validateEmpty")),d=!0;return 0!==c.length&&c.forEach(function(a){var b=a.name,c=document.getElementById(b+"div");s.doValidation(a),(r.hasClass(c,"fieldempty")||r.hasClass(c,"fieldinvalid"))&&(r.addClass(c,"hasError"),d=!1)}),d?(r.removeClass(b,"hasErrors"),q.trigger("valid"+b.name)):(r.addClass(b,"hasErrors"),a.preventDefault(),q.trigger("invalid"+b.name)),d}},u={$el:null,render:function(a){return this.$el=document.getElementById("captcha-standalone"),this.$el?(this.$el.className+=" captcha-overlay captcha-container",a||(document.getElementsByClassName("captchaRefresh")[0].addEventListener("click",this.refreshCaptcha),document.getElementsByClassName("captchaPlay")[0].addEventListener("click",this.playCaptcha),document.getElementById("captcha").addEventListener("focus",t.showError),document.getElementById("captcha").addEventListener("keydown",t.removeError),document.getElementById("captcha").addEventListener("blur",t.removeError)),q.on("closePopup",function(){u.removePopup()}),this.$el.style.visibility="visible",t.markError(this.$el),void s.init(this.$el)):this.renderError()},renderError:function(){this.$el=document.getElementById("captchaComponent"),this.$el.className+=" captcha-overlay captcha-container",this.$el.style.display="block",this.$el.style.visibility="visible"},refreshCaptcha:function(a){a.preventDefault(),a.stopPropagation(),h({adsCaptcha:"captchaRefresh",link:"Captcha refresh."});var b=i(d);b.open("get","/auth/refreshcaptcha",!0),b.setRequestHeader("Accept","application/json"),b.onreadystatechange=function(){if(4===b.readyState&&this.response){var a=JSON.parse(this.response),c=document.getElementById("captcha");c.querySelector("img").setAttribute("src",a.captchaImgUrl),c.querySelector(".audio a").setAttribute("href",a.captchaAudioUrl),c.querySelector("input").value="",document.getElementById("captchaPlayer").setAttribute("src",a.captchaAudioUrl),document.querySelectorAll("body.desktop").length>0&&c.querySelector("input").focus()}},b.send()},playCaptcha:function(a){h({adsCaptcha:"playCaptcha",link:"Captcha play audio."});var b=document.querySelector("#captcha.captcha-container"),c=document.getElementById("captchaPlayer"),d=!(!c.canPlayType||!c.canPlayType("audio/mpeg;").replace(/no/,""));return!d||(a.preventDefault(),b.querySelector("input").focus(),c.load(),c.play(),void 0)},removePopup:function(){document.body.removeChild(document.getElementById("captchaComponent"))}}},e=document.head?document.head:document.getElementsByTagName("head")[0];e&&!e.getAttribute("data-xhr-interceptor-disabled")&&(window.XMLHttpRequest?window.XMLHttpRequest=d:window.ActiveXObject=d)}();